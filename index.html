<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Sentiment Analysis Web App</title>
        <meta charset="utf-8">
        <meta name="viewport"  content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

        <script>
            $(document).ready(function(){
                
                $("#submit-review").click(function (evt) {
                    evt.preventDefault();

                    $("#submit-review").html('Processing...');
                    $("#submit-review").attr("disabled", "disabled");

                    $('#result').html('');
                    $('#result').removeClass('bg-danger');
                    $('#result').removeClass('bg-success');

                    const review = $("#review").val()

                    console.log(review);

                    $.ajax({
                        type: 'POST',
                        url: "https://gkxxu6qpvl.execute-api.us-east-2.amazonaws.com/prod",
                        crossDomain: true,
                        data: review
                    }).done(function(response) {
                        console.log(response);
                        
                        $("#submit-review").html('Submit');
                        $("#submit-review").removeAttr("disabled", "disabled");

                        if (response == 0) {
                            $('#result').addClass('bg-danger');
                            $('#result').html('Your review was NEGATIVE!');
                        } else {
                            $('#result').addClass('bg-success');
                            $('#result').html('Your review was POSITIVE!');
                        }
                    });
                });
            });
        </script>

    </head>
    <body>

        <div class="container">
            <h1>Is your review positive, or negative?</h1>
            <p>Enter your review below and click submit to find out...</p>
            <form id="form-input">
                <div class="form-group">
                    <label for="review">Review:</label>
                    <textarea class="form-control"  rows="5" id="review" placeholder="Please write your review here."></textarea>
                </div>
                <button type="submit" class="btn btn-primary" id="submit-review">Submit</button>
            </form>
            <h1 id="result"></h1>
        </div>
    </body>
</html>
